{% comment %}
  ============================================
  THE SWEET TOOTH - HOW IT WORKS
  ============================================
  
  3-step visual process for basket builder
  
============================================
{% endcomment %}

<section class="st-how-it-works">
  <div class="st-how-it-works__container page-width">
    <h2 class="st-how-it-works__headline">{{ section.settings.headline }}</h2>
    
    <div class="st-how-it-works__steps">
      {%- for block in section.blocks -%}
        <div class="st-how-it-works__step" {{ block.shopify_attributes }}>
          <div class="st-how-it-works__number">{{ forloop.index }}</div>
          <div class="st-how-it-works__icon">{{ block.settings.icon }}</div>
          <h3 class="st-how-it-works__title">{{ block.settings.title }}</h3>
          <p class="st-how-it-works__description">{{ block.settings.description }}</p>
        </div>
        
        {%- unless forloop.last -%}
          <div class="st-how-it-works__connector"></div>
        {%- endunless -%}
      {%- endfor -%}
    </div>
    
    <p class="st-how-it-works__tagline">{{ section.settings.tagline }}</p>
    
    {%- if section.settings.cta_text != blank -%}
      <div class="st-how-it-works__cta">
        <a href="{{ section.settings.cta_link }}" class="st-btn-primary">
          {{ section.settings.cta_text }}
        </a>
      </div>
    {%- endif -%}
  </div>
</section>

<style>
  .st-how-it-works {
    padding: var(--st-section-spacing, 80px) 20px;
    background-color: var(--st-cool-grey, #F5F5F7);
  }
  
  .st-how-it-works__container {
    max-width: 1000px;
    margin: 0 auto;
    text-align: center;
  }
  
  .st-how-it-works__headline {
    font-family: var(--st-font-display, system-ui);
    font-size: clamp(28px, 4vw, 40px);
    font-weight: 600;
    color: var(--st-charcoal, #1D1D1F);
    margin: 0 0 48px 0;
  }
  
  .st-how-it-works__steps {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 20px;
    margin-bottom: 40px;
  }
  
  .st-how-it-works__step {
    flex: 1;
    max-width: 280px;
    padding: 24px;
    background: var(--st-white, #FFFFFF);
    border-radius: 20px;
    box-shadow: var(--st-shadow-soft, 0 4px 20px rgba(0, 0, 0, 0.08));
  }
  
  .st-how-it-works__number {
    width: 40px;
    height: 40px;
    margin: 0 auto 16px;
    background: var(--st-pink, #F06292);
    color: var(--st-white, #FFFFFF);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--st-font-display, system-ui);
    font-size: 20px;
    font-weight: 700;
  }
  
  .st-how-it-works__icon {
    font-size: 48px;
    margin-bottom: 16px;
    line-height: 1;
  }
  
  .st-how-it-works__title {
    font-family: var(--st-font-body, system-ui);
    font-size: 20px;
    font-weight: 600;
    color: var(--st-charcoal, #1D1D1F);
    margin: 0 0 8px 0;
  }
  
  .st-how-it-works__description {
    font-size: 15px;
    color: var(--st-text-secondary, #6E6E73);
    line-height: 1.5;
    margin: 0;
  }
  
  .st-how-it-works__connector {
    width: 40px;
    height: 2px;
    background: linear-gradient(90deg, var(--st-pink, #F06292) 0%, rgba(240, 98, 146, 0.3) 100%);
    margin-top: 80px;
    flex-shrink: 0;
  }
  
  .st-how-it-works__tagline {
    font-family: var(--st-font-body, system-ui);
    font-size: 18px;
    color: var(--st-text-secondary, #6E6E73);
    font-style: italic;
    margin: 0 0 32px 0;
  }
  
  .st-how-it-works__cta {
    margin-top: 24px;
  }
  
  @media (max-width: 768px) {
    .st-how-it-works__steps {
      flex-direction: column;
      align-items: center;
      gap: 24px;
    }
    
    .st-how-it-works__step {
      max-width: 100%;
      width: 100%;
    }
    
    .st-how-it-works__connector {
      width: 2px;
      height: 24px;
      margin: 0;
      background: linear-gradient(180deg, var(--st-pink, #F06292) 0%, rgba(240, 98, 146, 0.3) 100%);
    }
  }
</style>

{% schema %}
{
  "name": "Sweet Tooth How It Works",
  "tag": "section",
  "class": "st-how-it-works-section",
  "settings": [
    {
      "type": "text",
      "id": "headline",
      "label": "Headline",
      "default": "Build the Perfect Gift in 3 Simple Steps"
    },
    {
      "type": "text",
      "id": "tagline",
      "label": "Tagline",
      "default": "No guessing. No stress."
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Button Text",
      "default": "Start Customizing"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA Button Link"
    }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Step",
      "limit": 4,
      "settings": [
        {
          "type": "text",
          "id": "icon",
          "label": "Icon (Emoji)",
          "default": "??"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Step Title",
          "default": "Choose Occasion"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Step Description",
          "default": "Pick from birthdays, thank yous, sympathy, and more"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Sweet Tooth How It Works",
      "blocks": [
        {
          "type": "step",
          "settings": {
            "icon": "??",
            "title": "Choose Your Occasion",
            "description": "Pick from birthdays, thank yous, sympathy, and more"
          }
        },
        {
          "type": "step",
          "settings": {
            "icon": "??",
            "title": "Pick Your Size",
            "description": "Select from 8 sizes, from intimate to grand gestures"
          }
        },
        {
          "type": "step",
          "settings": {
            "icon": "✉️",
            "title": "Personalize It",
            "description": "Add a message and any extras to make it special"
          }
        }
      ]
    }
  ]
}
{% endschema %}
